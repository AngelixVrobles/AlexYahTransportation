<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Driver Registration</title>
    <!-- Font icons -->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
    <!-- Core theme -->
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body id="page-top">

    <!-- Navigation-->
    <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#page-top"><img src="assets/img/logos/AlexYahTransportationLogo.png" alt="..." /></a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ms-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#About us">About Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="#Driver Registration">Driver Registration</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#How it Works">How it Works</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#why us">Why Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>

    <!-- Formulario -->
        <section class="page-section bg-light" id="driver-registration" style="margin-top: 100px;"> 
  <div class="container">
    <h2 class="text-center mt-0">APPLY</h2>
    <hr class="divider" />   
    <p class="text-center text-muted mb-5">Home / Apply</p>  
  </div>

  <!-- Card -->
  <div class="form-container">
    <form id="driverForm"  
      action="https://alexyahtransportation-1.onrender.com/upload"  
      method="POST"  
      enctype="multipart/form-data"  
      class="container p-4 shadow rounded bg-white" 
      style="max-width: 900px;">

      <h2 class="text-center mb-4">Apply to AlexYah</h2>

      <div class="row">
        <!-- Nombres -->
        <div class="mb-3">
          <label>First Name*</label>
          <input type="text" name="name" class="form-control" required>
        </div>
        <div class="mb-3">
          <label>Last Name*</label>
          <input type="text" name="last_name" class="form-control" required>
        </div>
        <div class="mb-3">
          <label>Email*</label>
          <input type="email" name="email" class="form-control" required>
        </div>
        <div class="mb-3">
          <label>Phone Number*</label>
          <input type="text" name="phone" class="form-control" required>
        </div>

        <!-- State -->
        <div class="col-md-6 mb-3">
          <label>Pick your State*</label>
          <select id="state" name="state" class="form-select" required>
            <option disabled selected>Select a State</option>
            <option value="California">California</option>
            <option value="Florida">Florida</option>
            <option value="Missouri">Missouri</option>
            <option value="Texas">Texas</option>
          </select>
        </div>

        <!-- City -->
        <div class="col-md-6 mb-3">
          <label>Pick your City*</label>
          <select id="city" name="city" class="form-select" required>
            <option disabled selected>Select a City</option>
          </select>
        </div>
      </div>

      
      <!-- Archivos -->
      <div class="mb-3">
        <label>Driver License (DL)*</label>
        <input type="file" name="driver_license" class="form-control image-input" accept="image/*"required>
      </div>

      <div class="mb-3">
        <label>Profile Picture*</label>
        <input type="file" name="profile_picture" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>Insurance*</label>
        <input type="file" name="insurance" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>Inspection*</label>
        <input type="file" name="inspection" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>5 Pictures of the Car (Front, Back, Sides, Odometer)*</label>
        <input type="file" name="car_pictures" class="form-control image-input" accept="image/*" multiple required>
      </div>

      <div class="mb-3">
        <label>Live Scan*</label>
        <input type="file" name="live_scan" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>Tb-Test*</label>
        <input type="file" name="tb_test" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>Drug Test*</label>
        <input type="file" name="drug_test" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>CPR*</label>
        <input type="file" name="cpr" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>DOT*</label>
        <input type="file" name="dot" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>English Course</label>
        <input type="file" name="english_course" class="form-control image-input" accept="image/*">
      </div>

      <div class="mb-3">
        <label>Pull Notice*</label>
        <input type="file" name="pull_notice" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>Safe Ride*</label>
        <input type="file" name="safe_ride" class="form-control image-input" accept="image/*" required>
      </div>

      <div class="mb-3">
        <label>W9*</label>
        <input type="file" name="w9" class="form-control image-input" accept="image/*" required>
      </div>

      <!-- Consentimiento -->
      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="consentText" id="consentText" required>
        <label class="form-check-label" for="consentText">
          By checking this box, I consent to receive transactional messages related to my account...
        </label>
      </div>

      <!-- Botón -->
      <div class="text-center">
        <button type="submit" class="btn btn-primary px-5">Submit Registration</button>
      </div>

    </form>
    <div id="mensaje" class="mt-3"></div>
  </div>
</section>

    <!-- Footer-->
        <footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-start">Copyright &copy; 2025 Alexyah Transportation. All rights reserved</div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="col-lg-4 text-lg-end">
                        <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                        <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
                    </div>
                </div>
            </div>
        </footer>

<!-- By checking this box, I consent to receive transactional messages related to my account, orders, or services i have requested. These messages may include appointment reminders, order confirmations, and account notifications among others. Message frequency may vary. Message & Data rates may apply. Reply HELP for help STOP to opt-out. -->

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>

    <script>
        document.querySelectorAll('.image-input').forEach(input => {
            input.addEventListener('change', function (e) {
                const file = this.files;
                const preview = this.nextElementSibling;

                // Si es múltiple (car pictures)
                if (this.hasAttribute('multiple')) {
                    const container = this.parentElement.querySelector('.multi-preview');
                    container.innerHTML = "";
                    [...file].forEach(f => {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            img.classList.add('me-2', 'mb-2');
                            img.style.width = "240px";
                            container.appendChild(img);
                        }
                        reader.readAsDataURL(f);
                    });
                } else {
                    if (file && file[0]) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            preview.src = e.target.result;
                            preview.classList.remove('d-none');
                        }
                        reader.readAsDataURL(file[0]);
                    }
                }
            });
        });
    </script>
    <script>
    const stateSelect = document.getElementById("state");
    const citySelect = document.getElementById("city");

     const citiesByState = {
        California: [
          "Alameda", "Antioch", "Berkeley", "Burlingame", "Campbell", "Castro Valley", "Citrus Heights",
          "Concord", "Cupertino", "Dublin", "Elk Grove", "Fairfield", "Foster City", "Hayward", "Lodi",
          "Los Gatos", "Menlo Park", "Milpitas", "Modesto", "Mountain View", "Morgan Hill", "Napa",
          "Oakland", "San Jose", "Santa Clara", "Santa Cruz", "San Lorenzo", "San Pablo", "Sacramento",
          "Saratoga", "Scotts Valley", "Stockton", "Sunnyvale", "Richmond", "Vallejo", "Watsonville"
        ],
        Florida: [
          "Auburndale", "Bartow", "Lakeland", "Mulberry"
        ],
        Missouri: [
          "Independence", "Kansas City", "Lee’s Summit", "Saint Louis"
        ],
        Texas: [
          "Houston", "Katy"
        ]
      };


    stateSelect.addEventListener("change", function () {
      const selectedState = this.value;
      const cities = citiesByState[selectedState] || [];

      // Limpiar opciones anteriores
      citySelect.innerHTML = '<option value="0">Select a city</option>';

      // Agregar nuevas ciudades
      cities.forEach(function (city) {
        const option = document.createElement("option");
        option.value = city;
        option.textContent = city;
        citySelect.appendChild(option);
      });
    });
  </script>
  <script>
  const citiesbyState = {
    California: [
      "Alameda", "Antioch", "Berkeley", "Burlingame", "Campbell", "Castro Valley", "Citrus Heights",
      "Concord", "Cupertino", "Dublin", "Elk Grove", "Fairfield", "Foster City", "Hayward", "Lodi",
      "Los Gatos", "Menlo Park", "Milpitas", "Modesto", "Mountain View", "Morgan Hill", "Napa",
      "Oakland", "San Jose", "Santa Clara", "Santa Cruz", "San Lorenzo", "San Pablo", "Sacramento",
      "Saratoga", "Scotts Valley", "Stockton", "Sunnyvale", "Richmond", "Vallejo", "Watsonville"
    ],
    Florida: ["Auburndale", "Bartow", "Lakeland", "Mulberry"],
    Missouri: ["Independence", "Kansas City", "Lee’s Summit", "Saint Louis"],
    Texas: ["Houston", "Katy"]
  };

  const stateCards = document.querySelectorAll('.state-card');
  const citiesContainer = document.getElementById('citiesContainer');

  stateCards.forEach(card => {
    card.addEventListener('click', () => {
      // Eliminar 'active' de todos
      stateCards.forEach(c => c.classList.remove('active'));
      card.classList.add('active');

      const state = card.dataset.state;
      const cities = citiesByState[state] || [];

      citiesContainer.innerHTML = "";
      cities.forEach(city => {
        const div = document.createElement("div");
        div.className = "square";
        div.textContent = city;
        citiesContainer.appendChild(div);
      });
    });
  });
</script>
  <script>
    document.getElementById('driverForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const form = event.target;
    const formData = new FormData(form);

    // Usar URL completa basada en el host actual
    const url = `${window.location.origin}/upload`;

    fetch(url, {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
        const mensajeDiv = document.getElementById('mensaje');
        if (data.success) {
          mensajeDiv.innerHTML = '<div class="alert alert-success">Your application has been submitted successfully!</div>';
          form.reset(); // Resetear el formulario
        } else {
          mensajeDiv.innerHTML = '<div class="alert alert-danger">There was an error submitting your application. Please try again.</div>';
        }
      })
      .catch(error => {
        console.error('Error:', error);
        const mensajeDiv = document.getElementById('mensaje');
        mensajeDiv.innerHTML = '<div class="alert alert-danger">There was an error submitting your application. Please try again.</div>';
      });
    });
  </script>
</body>
</html>
