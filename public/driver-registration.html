<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Driver Registration</title>
    <!-- Font icons -->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
    <!-- Core theme -->
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body id="page-top">

    <!-- Navigation-->
    <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#index.html"><img src="assets/img/logos/AlexYahTransportationLogo.png" alt="..." /></a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ms-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#About us">About Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="#Driver Registration">Driver Registration</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#Hot it Works">Hot it Works</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#why us">Why Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>

    <!-- Formulario -->
    <section class="page-section bg-light" id="driver-registration" style="margin-top: 100px;">
    <div class="container">

        <!-- Card -->
        <div class="card border bg-transparent">
            <div class="card-body">
               <form id="driverForm"  
                action="https://alexyahtransportation-production.up.railway.app/upload"  
                method="POST"  
                enctype="multipart/form-data"  
                class="container p-4 shadow rounded bg-white" 
                style="max-width: 900px;">

                    <h2 class="text-center mb-3 fw-bold">🚘 Driver Registration</h2>
                    <p class="text-center text-muted mb-4">Complete all fields below to apply as a driver.</p>

                     <!-- Nombre -->
                    <div class="mb-4 row">
                        <label class="col-sm-4 col-form-label">Name *</label>
                        <div class="col-sm-8">
                        <input type="text" class="form-control" name="name" required>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="mb-4 row">
                        <label class="col-sm-4 col-form-label">Email *</label>
                        <div class="col-sm-8">
                        <input type="email" class="form-control" name="email" required>
                        </div>
                    </div>

                    <!-- phone number -->
                    <div class="mb-4 row">
                        <label class="col-sm-4 col-form-label">Phone number *</label>
                        <div class="col-sm-8">
                        <input type="number" class="form-control" name="phone" required>
                        </div>
                    </div>

                    <!-- State -->
                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Pick your State *</label>
                        <div class="col-12 col-md-8">
                        <select id="state" name="state" class="form-select w-100" required>
                            <option disabled selected>Select a State</option>
                            <option value="California">California</option>
                            <option value="Florida">Florida</option>
                            <option value="Missouri">Missouri</option>
                            <option value="Texas">Texas</option>
                        </select>
                        </div>
                    </div>

                    <!-- City -->
                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Pick your City *</label>
                        <div class="col-12 col-md-8">
                        <select id="city" name="city" class="form-select w-100" required>
                            <option disabled selected>Select a City</option>
                        </select>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Section Title -->
                    <h5 class="fw-bold mb-3 text-primary">📎 Upload Required Documents</h5>

                    <!-- Loop de documentos -->
                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Driver License *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="driver_license" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Profile Picture *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="profile_picture" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Registration *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="registration" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Insurance *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="insurance" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Inspection *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="inspection" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Car Pictures (5) *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="car_pictures" class="form-control w-100" accept="image/*" multiple required>
                        <small class="text-muted">Upload Front, Back, Sides, and Odometer</small>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Live Scan *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="live_scan" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">TB Test *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="tb_test" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Drug Test *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="drug_test" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">CPR *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="cpr" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">DOT *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="dot" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">English Course</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="english_course" class="form-control w-100" accept="image/*">
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Pull Notice *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="pull_notice" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-12 col-md-4 col-form-label">Safe Ride *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="safe_ride" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-4 row">
                        <label class="col-12 col-md-4 col-form-label">W9 *</label>
                        <div class="col-12 col-md-8">
                        <input type="file" name="w9" class="form-control w-100" accept="image/*" required>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Consent -->
                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" name="consentText" id="consentText" required>
                        <label class="form-check-label" for="consentText">
                        I consent to receive transactional messages related to my account.
                        </label>
                    </div>

                    <!-- Submit -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg w-100 w-md-auto">Submit Registration</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    </section>
    <!-- Footer-->
        <footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-start">Copyright &copy; 2025 Alexyah Transportation. All rights reserved</div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="col-lg-4 text-lg-end">
                        <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                        <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
                    </div>
                </div>
            </div>
        </footer>

<!-- By checking this box, I consent to receive transactional messages related to my account, orders, or services i have requested. These messages may include appointment reminders, order confirmations, and account notifications among others. Message frequency may vary. Message & Data rates may apply. Reply HELP for help STOP to opt-out. -->

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>

    <script>
        document.querySelectorAll('.image-input').forEach(input => {
            input.addEventListener('change', function (e) {
                const file = this.files;
                const preview = this.nextElementSibling;

                // Si es múltiple (car pictures)
                if (this.hasAttribute('multiple')) {
                    const container = this.parentElement.querySelector('.multi-preview');
                    container.innerHTML = "";
                    [...file].forEach(f => {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            img.classList.add('me-2', 'mb-2');
                            img.style.width = "240px";
                            container.appendChild(img);
                        }
                        reader.readAsDataURL(f);
                    });
                } else {
                    if (file && file[0]) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            preview.src = e.target.result;
                            preview.classList.remove('d-none');
                        }
                        reader.readAsDataURL(file[0]);
                    }
                }
            });
        });
    </script>
    <script>
        const stateSelect = document.getElementById("state");
        const citySelect = document.getElementById("city");

        const citiesByState = {
            California: [
            "Alameda", "Antioch", "Berkeley", "Burlingame", "Campbell", "Castro Valley", "Citrus Heights",
            "Concord", "Cupertino", "Dublin", "Elk Grove", "Fairfield", "Foster City", "Hayward", "Lodi",
            "Los Gatos", "Menlo Park", "Milpitas", "Modesto", "Mountain View", "Morgan Hill", "Napa",
            "Oakland", "San Jose", "Santa Clara", "Santa Cruz", "San Lorenzo", "San Pablo", "Sacramento",
            "Saratoga", "Scotts Valley", "Stockton", "Sunnyvale", "Richmond", "Vallejo", "Watsonville"
            ],
            Florida: [
            "Auburndale", "Bartow", "Lakeland", "Mulberry"
            ],
            Missouri: [
            "Independence", "Kansas City", "Lee’s Summit", "Saint Louis"
            ],
            Texas: [
            "Houston", "Katy"
            ]
        };


        stateSelect.addEventListener("change", function () {
        const selectedState = this.value;
        const cities = citiesByState[selectedState] || [];

        // Limpiar opciones anteriores
        citySelect.innerHTML = '<option value="0">Select a city</option>';

        // Agregar nuevas ciudades
        cities.forEach(function (city) {
            const option = document.createElement("option");
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
        });
        });
  </script>
    
    <script>
        document.getElementById("driverForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const form = e.target;
        const formData = new FormData(form);

        try {
            const respuesta = await fetch("http://localhost:3000/upload", {
            method: "POST",
            body: formData
            });

            const resultado = await respuesta.text();
            alert("Servidor respondió: " + resultado);
        } catch (error) {
            console.error("Error:", error);
            alert("Ocurrió un error al enviar el formulario ❌");
        }
        });
    </script>
</body>
</html>
